{% extends 'base.html' %}
{% load static %}

{% block title %}التصنيفات{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/stock/categories.css' %}">
{% endblock %}

{% block content %}
<div class="categories-page">
    <div class="page-header">
        <div class="header-content">
            <h1>
                <i class="fas fa-folder-open"></i>
                إدارة التصنيفات
            </h1>
            <p class="subtitle">{{ categories|length }} تصنيف</p>
        </div>
        <div class="header-actions">
            <button class="btn btn-primary" onclick="showAddModal()">
                <i class="fas fa-plus"></i>
                إضافة تصنيف
            </button>
            <a href="{% url 'stock:dashboard' %}" class="btn btn-outline">
                <i class="fas fa-arrow-right"></i>
                عودة
            </a>
        </div>
    </div>

    <!-- Categories Grid -->
    <div class="categories-grid">
        {% for category in categories %}
        <div class="category-card">
            <div class="category-icon" style="background-color: {{ category.color }};">
                <i class="{{ category.icon }}"></i>
            </div>
            <div class="category-info">
                <h3>{{ category.name }}</h3>
                {% if category.description %}
                <p>{{ category.description }}</p>
                {% endif %}
                <div class="category-stats">
                    <span class="stat">
                        <i class="fas fa-box"></i>
                        {{ category.products_count_display }} منتج
                    </span>
                    <span class="stat">
                        <i class="fas fa-layer-group"></i>
                        {{ category.total_quantity_display }} قطعة
                    </span>
                </div>
            </div>
            <div class="category-actions">
                <button class="btn-action edit" onclick="editCategory({{ category.id }})">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn-action delete" onclick="deleteCategory({{ category.id }}, '{{ category.name }}')">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>
        {% empty %}
        <div class="empty-state">
            <i class="fas fa-folder-open"></i>
            <h3>لا توجد تصنيفات</h3>
            <button class="btn btn-primary" onclick="showAddModal()">
                <i class="fas fa-plus"></i>
                إضافة تصنيف
            </button>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Add/Edit Modal -->
<div id="categoryModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modalTitle">إضافة تصنيف جديد</h2>
            <button class="btn-close" onclick="closeModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <form id="categoryForm" method="POST">
            {% csrf_token %}
            <div class="modal-body">
                <div class="form-group">
                    <label for="name">اسم التصنيف *</label>
                    <input type="text" 
                           id="name" 
                           name="name" 
                           required
                           autocomplete="off">
                </div>
                
                <div class="form-group">
                    <label for="description">الوصف</label>
                    <textarea id="description" 
                              name="description" 
                              rows="3"
                              autocomplete="off"></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="icon">الأيقونة</label>
                        <select id="icon" name="icon" autocomplete="off">
                            <option value="fas fa-cube">مكعب</option>
                            <option value="fas fa-glasses">نظارات</option>
                            <option value="fas fa-eye">عين</option>
                            <option value="fas fa-sun">شمس</option>
                            <option value="fas fa-star">نجمة</option>
                            <option value="fas fa-gem">ماسة</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="color">اللون</label>
                        <input type="color" 
                               id="color" 
                               name="color" 
                               value="#4A9EAD"
                               autocomplete="off">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i>
                    حفظ
                </button>
                <button type="button" class="btn btn-cancel" onclick="closeModal()">
                    إلغاء
                </button>
            </div>
        </form>
    </div>
</div>

{% block extra_js %}
<script src="{% static 'js/stock/categories.js' %}"></script>
{% endblock %}



{% endblock %}